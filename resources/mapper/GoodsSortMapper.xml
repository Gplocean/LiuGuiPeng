<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="GoodsSortControl.dao.GoodsSortDao">
<!--新增商品分类-->
  <insert id="addGoodsSort" parameterType="GoodsSortControl.entity.GoodsSortInfo">

    insert into t_goods_classification(
        class_id,
        class_name,
        class_parent,
        remarks,
        is_deleted,
        gmt_create,
        create_by,
        gmt_modified,
        last_modified_by,
        version
    )
    VALUES (
    now(),
    #{className},
    #{classParent},
    #{remarks},
    0,
    now(),
    #{createBy}
    now(),
    #{lastModifiedBy},
    0
    )
  </insert>

    <!--查询一级商品分类名-->
<select id="listGoodsSortFirst" parameterType="GoodsSortControl.entity.GoodsSortInfo" resultType="GoodsSortControl.entity.GoodsSortInfo">
    select GoodsSortFirstName
    from GoodsSortFirst
    where is_deleted = 0
</select>

    <!--查询二级商品分类名-->
    <select id="listGoodsSortSecond" parameterType="GoodsSortControl.entity.GoodsSortInfo" resultType="GoodsSortControl.entity.GoodsSortInfo">
    select GoodsSortSecondName
    from GoodsSortSecond
    where class_parent = #{classParent}
    and is_deleted = 0
</select>
    <!--修改商品分类-->
    <update id="updateGoodsSort" parameterType="GoodsSortControl.entity.GoodsSortInfo" >
        update  t_goods_classification
        set
            class_id = #{classCode},
            class_name = #{className},
            remarks = #{remarks},
            version = version+1
            gmt_modified = now(),
            last_modified_by   = #{lastModifiedBy}

    </update>

    <!--删除商品分类-->
    <update id="updateGoodsSort" parameterType="GoodsSortControl.entity.GoodsSortInfo" >
        update  t_goods_classification
        set
            class_id = #{classCode},
            class_name = #{className},
            remarks = #{remarks},
            version = version+1
            gmt_modified = now(),
            last_modified_by   = #{lastModifiedBy},
            is_delete = 1

    </update>

</mapper>